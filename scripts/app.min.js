d3.csv("mySkills.csv",function(t,e){function r(){u.attr("d",function(t){var e=t.target.x-t.source.x,r=t.target.y-t.source.y,a=Math.sqrt(e*e+r*r);return"M"+t.source.x+","+t.source.y+"A"+a+","+a+" 0 0,1 "+t.target.x+","+t.target.y}),v.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}function a(){d3.event.defaultPrevented||(d3.select(this).select("text").transition().duration(750).attr("x",22).style("stroke","lightsteelblue").style("stroke-width",".5px").style("font","20px sans-serif"),d3.select(this).select("circle").transition().duration(750).attr("r",16))}function n(){d3.select(this).select("circle").transition().duration(750).attr("r",6),d3.select(this).select("text").transition().style("stroke","none").style("stroke","none").style("font","10px sans-serif")}var s={};e.forEach(function(t){t.source=s[t.source]||(s[t.source]={name:t.source}),t.target=s[t.target]||(s[t.target]={name:t.target}),t.value=+t.value});var l=960,o=700,c=d3.layout.force().nodes(d3.values(s)).links(e).size([l,o]).linkDistance(60).charge(-450).on("tick",r).start(),i=d3.scale.linear().range([0,100]);i.domain([0,d3.max(e,function(t){return t.value})]),e.forEach(function(t){i(t.value)<=25?t.type="twofive":i(t.value)<=50&&i(t.value)>25?t.type="fivezero":i(t.value)<=75&&i(t.value)>50?t.type="sevenfive":i(t.value)<=100&&i(t.value)>75&&(t.type="onezerozero")});var d=d3.select("#svg-tools").append("svg").attr("width",l).attr("height",o);d.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5");var u=d.append("svg:g").selectAll("path").data(c.links()).enter().append("svg:path").attr("class",function(t){return"link "+t.type}).attr("marker-end","url(#end)"),v=d.selectAll(".node").data(c.nodes()).enter().append("g").attr("class","node").on("click",a).on("dblclick",n).call(c.drag);color=d3.scale.category20c(),v.append("circle").attr("r",5).style("fill",function(t){return color(t.name)}),v.append("text").attr("x",12).attr("dy",".35em").text(function(t){return t.name})});
